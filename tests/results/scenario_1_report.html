<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scenario 4.3.1 - DB Server Monitoring - Test Report</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #2c3e50;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 4px solid #3498db;
            font-size: 1.8em;
        }

        h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .metadata {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .metric-card.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .metric-card.warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .metric-card.info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-unit {
            font-size: 0.85em;
            opacity: 0.8;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th {
            background: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .status-good {
            color: #27ae60;
            font-weight: bold;
        }

        .status-bad {
            color: #e74c3c;
            font-weight: bold;
        }

        .status-warning {
            color: #f39c12;
            font-weight: bold;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            border-left: 4px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #0c5460;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            border-color: #155724;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #856404;
            color: #856404;
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .phase-table {
            margin: 20px 0;
        }

        .phase-table th {
            background: #34495e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Scenario 4.3.1 - DB Server Monitoring</h1>

        <div class="metadata">
            <strong>Report Generated:</strong> 2025-12-10 00:11:46<br>
            <strong>Test Duration:</strong> 0.00 seconds<br>
            <strong>Tool:</strong> NFT Tracer
        </div>

        <h2>üìà Key Performance Metrics</h2>

        <div class="metric-grid">
            <div class="metric-card success">
                <div class="metric-label">Detection Accuracy</div>
                <div class="metric-value">0.0%</div>
                <div class="metric-unit">Overall Detection Rate</div>
            </div>

            <div class="metric-card info">
                <div class="metric-label">Detection Latency</div>
                <div class="metric-value">0.0</div>
                <div class="metric-unit">milliseconds</div>
            </div>

            <div class="metric-card success">
                <div class="metric-label">False Positives</div>
                <div class="metric-value">NO ‚úì</div>
                <div class="metric-unit">Legitimate traffic flagged</div>
            </div>

            <div class="metric-card info">
                <div class="metric-label">DROP Completeness</div>
                <div class="metric-value">0.0%</div>
                <div class="metric-unit">Records with full info</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">CPU Usage (Avg)</div>
                <div class="metric-value">0.0%</div>
                <div class="metric-unit">System load</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">Unique Source IPs</div>
                <div class="metric-value">0</div>
                <div class="metric-unit">Distinct attackers</div>
            </div>
        </div>

        <h2>üéØ Test Configuration</h2>
        <table>
            <tr>
                <th>Parameter</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>DB Server IP</td>
                <td><code>10.10.0.1</code></td>
            </tr>
            <tr>
                <td>DB Port</td>
                <td><code>5432</code></td>
            </tr>
            <tr>
                <td>Whitelist IP</td>
                <td><code>10.10.0.2</code></td>
            </tr>
            <tr>
                <td>DB Namespace</td>
                <td><code>dbns</code></td>
            </tr>
            <tr>
                <td>Attacker Namespace</td>
                <td><code>attns</code></td>
            </tr>
        </table>

        <h2>üì¶ Traffic Summary</h2>

        <div class="chart-container">
            <h3>Packet Distribution by Verdict</h3>
            <div id="verdictPieChart"></div>
        </div>

        <table>
            <tr>
                <th>Metric</th>
                <th>Value</th>
                <th>Status</th>
            </tr>
            <tr>
                <td>Total Packets Sent</td>
                <td>0</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Packets Detected</td>
                <td>0</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Drops Detected / Expected</td>
                <td>0 / 0</td>
                <td class="status-bad">0.0%</td>
            </tr>
            <tr>
                <td>Accepts Detected / Expected</td>
                <td>0 / 0</td>
                <td class="status-bad">0.0%</td>
            </tr>
        </table>

        <h2>üìä Three-Phase Traffic Pattern</h2>

        <div class="alert alert-info">
            <strong>‚ÑπÔ∏è Test Methodology:</strong><br>
            ‚Ä¢ <strong>Phase 1 - Baseline:</strong> Normal traffic from whitelist IP to establish baseline<br>
            ‚Ä¢ <strong>Phase 2 - Legitimate Spike:</strong> High traffic from whitelist IP to test false positive detection<br>
            ‚Ä¢ <strong>Phase 3 - Attack Spike:</strong> Traffic from random IPs to simulate distributed attack
        </div>

        <div class="chart-container">
            <h3>Detection Accuracy Breakdown</h3>
            <div id="accuracyBarChart"></div>
        </div>

        <h2>üîç Scenario 4.3.1 - ƒê√°nh Gi√° Chi Ti·∫øt</h2>

        <h3>1. Kh·∫£ NƒÉng Ph√°t Hi·ªán L∆∞u L∆∞·ª£ng</h3>

        <table>
            <tr>
                <th>Ch·ªâ S·ªë</th>
                <th>Gi√° Tr·ªã</th>
                <th>ƒê√°nh Gi√°</th>
            </tr>
            <tr>
                <td><strong>Detection Latency</strong><br><small>Th·ªùi gian t·ª´ attack start ‚Üí first DROP detection</small></td>
                <td>0.00 ms</td>
                <td class="status-good">
                    ‚úì Excellent
                </td>
            </tr>
            <tr>
                <td><strong>Spike False Positive</strong><br><small>H·ªá th·ªëng c√≥ flag nh·∫ßm legitimate spike kh√¥ng?</small></td>
                <td>NO ‚úì</td>
                <td class="status-good">
                    ‚úì PASSED
                </td>
            </tr>
        </table>

        <h3>2. Kh·∫£ NƒÉng Ghi Nh·∫≠n v√† Truy V·∫øt Packet Drop</h3>

        <table>
            <tr>
                <th>Ch·ªâ S·ªë</th>
                <th>Gi√° Tr·ªã</th>
                <th>ƒê√°nh Gi√°</th>
            </tr>
            <tr>
                <td><strong>DROP Record Completeness</strong><br><small>% records c√≥ ƒë·ªß: src_ip, dst_ip, ports, comm</small></td>
                <td>0.00%</td>
                <td class="status-bad">
                    ‚ö† Needs Improvement
                </td>
            </tr>
            <tr>
                <td><strong>Unique Source IPs Tracked</strong><br><small>Kh·∫£ nƒÉng track nhi·ªÅu ngu·ªìn t·∫•n c√¥ng</small></td>
                <td>0 IPs</td>
                <td class="status-good">‚úì Tracked</td>
            </tr>
        </table>

        <h2>‚ö° Performance Metrics</h2>

        <div class="chart-container">
            <h3>Resource Usage</h3>
            <div id="performanceChart"></div>
        </div>

        <table>
            <tr>
                <th>Metric</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>CPU Usage (Average)</td>
                <td>0.00%</td>
            </tr>
            <tr>
                <td>CPU Usage (Maximum)</td>
                <td>0.00%</td>
            </tr>
            <tr>
                <td>Execution Time</td>
                <td>0.00 seconds</td>
            </tr>
        </table>

        <h2>üî¨ Nftables Counter Comparison</h2>

        <table>
            <tr>
                <th>Counter Type</th>
                <th>Nftables Value</th>
                <th>NFT Tracer Detected</th>
                <th>Match Rate</th>
            </tr>
            <tr>
                <td>ACCEPT Counter</td>
                <td>0</td>
                <td>0</td>
                <td>0.0%</td>
            </tr>
            <tr>
                <td>DROP Counter</td>
                <td>0</td>
                <td>0</td>
                <td>0.0%</td>
            </tr>
        </table>

        <h2>üìã Verdict Breakdown</h2>

        <table>
            <tr>
                <th>Verdict</th>
                <th>Count</th>
                <th>Percentage</th>
            </tr>
        </table>

        <h2>üí° Key Findings & Recommendations</h2>

        <div class="alert alert-success">
            <strong>‚úì Strengths:</strong><br>
            ‚Ä¢ No false positives - correctly identified legitimate traffic spike<br>
        </div>

        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è Areas for Improvement:</strong><br>
            ‚Ä¢ DROP detection accuracy is below 70% - investigate missed detections<br>
            ‚Ä¢ DROP record completeness below 90% - some events missing required fields<br>
        </div>

        <div class="alert alert-info">
            <strong>üìä Recommendations:</strong><br>
            ‚Ä¢ Use this data to establish baseline performance metrics<br>
            ‚Ä¢ Monitor detection latency trends over time<br>
            ‚Ä¢ Review DROP events with incomplete records to improve data collection<br>
            ‚Ä¢ Set up alerts for false positive rate above threshold<br>
            ‚Ä¢ Compare results across different test scenarios
        </div>

        <div class="footer">
            <p>Generated by NFT Tracer Test Suite | 2025-12-10 00:11:46</p>
            <p>Data source: unknown</p>
        </div>
    </div>

    <script>
        // Verdict Pie Chart
        var verdictData = [{
            values: [],
            labels: [],
            type: 'pie',
            marker: {
                colors: ['#e74c3c', '#27ae60', '#3498db', '#f39c12', '#9b59b6']
            },
            textinfo: 'label+percent',
            textposition: 'outside',
            automargin: true
        }];

        var verdictLayout = {
            height: 400,
            showlegend: true,
            legend: {
                orientation: 'h',
                y: -0.2
            }
        };

        Plotly.newPlot('verdictPieChart', verdictData, verdictLayout, {responsive: true});

        // Accuracy Bar Chart
        var accuracyData = [{
            x: ['Drop Detection', 'Accept Detection', 'Overall'],
            y: [0.00, 0.00, 0.00],
            type: 'bar',
            marker: {
                color: ['#e74c3c', '#27ae60', '#3498db']
            },
            text: ['0.0%', '0.0%', '0.0%'],
            textposition: 'outside'
        }];

        var accuracyLayout = {
            yaxis: {
                title: 'Accuracy (%)',
                range: [0, 105]
            },
            height: 400
        };

        Plotly.newPlot('accuracyBarChart', accuracyData, accuracyLayout, {responsive: true});

        // Performance Chart
        var performanceData = [{
            x: ['CPU Avg', 'CPU Max'],
            y: [0.00, 0.00],
            type: 'bar',
            marker: {
                color: ['#667eea', '#764ba2']
            },
            text: ['0.0%', '0.0%'],
            textposition: 'outside'
        }];

        var performanceLayout = {
            yaxis: {
                title: 'CPU Usage (%)',
                range: [0, 105]
            },
            height: 400
        };

        Plotly.newPlot('performanceChart', performanceData, performanceLayout, {responsive: true});
    </script>
</body>
</html>
